<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idle Clicker Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f0f0f0;
            position: relative;
            min-height: 100vh;
        }

        .counter {
            font-size: 24px;
            font-weight: bold;
            display: none;
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }

        .click-button {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 3px solid #333;
            background-color: #fff;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.1s;
            position: fixed;
            top: 25vh;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }

        .click-button:hover {
            background-color: #f0f0f0;
        }

        .click-button:active {
            background-color: #e0e0e0;
        }

        .shop {
            display: none;
            position: fixed;
            bottom: 33.33vh;
            left: 20px;
            z-index: 10;
        }

        .shop h1 {
            font-size: 24px;
            text-decoration: underline;
            margin: 0 0 10px 0;
            color: black;
        }

        .shop-item {
            display: none;
            margin: 5px 0;
            align-items: center;
            gap: 10px;
        }

        .shop-item button {
            padding: 5px 10px;
            border: 1px solid #333;
            background-color: #fff;
            cursor: pointer;
            font-size: 14px;
        }

        .shop-item.affordable {
            color: black;
        }

        .shop-item.unaffordable {
            color: #cccccc;
        }

        .shop-item.unaffordable button {
            color: #cccccc;
            border-color: #cccccc;
            cursor: not-allowed;
        }

        .shop-item span {
            font-size: 14px;
        }

        .messages {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            height: 280px;
            background-color: #fff;
            border: 2px solid #333;
            z-index: 10;
        }

        .messages h1 {
            font-size: 24px;
            text-decoration: underline;
            margin: 0;
            padding: 10px 10px 5px 10px;
            color: black;
            background-color: #fff;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        #messagesContainer {
            height: calc(280px - 50px);
            overflow-y: auto;
            padding: 0 10px 10px 10px;
        }

        .message {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 2px 0;
            white-space: pre-wrap;
            line-height: 1.2;
        }

        .debug-window {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            width: 200px;
            background-color: #fff;
            border: 2px solid #333;
            padding: 10px;
            z-index: 20;
        }

        .debug-window h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
            color: #333;
        }

        .debug-field {
            margin: 5px 0;
        }

        .debug-field label {
            display: block;
            font-size: 12px;
            margin-bottom: 2px;
        }

        .debug-field input {
            width: 60%;
            padding: 2px 5px;
            font-size: 12px;
            border: 1px solid #ccc;
        }

        .debug-save {
            width: 100%;
            padding: 5px;
            margin-top: 10px;
            background-color: #333;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 12px;
        }

        .debug-save:hover {
            background-color: #555;
        }

        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 1000;
        }

        .firework {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(20);
                opacity: 0;
            }
        }

        .win-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3);
            background-size: 400% 400%;
            animation: gradientShift 3s ease infinite;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .win-text {
            font-size: 4rem;
            font-weight: bold;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            text-align: center;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
    </style>
</head>
<body>
    <div class="counter" id="counter">0</div>
    <button class="click-button" id="clickButton">Click</button>
    <div class="shop" id="shop">
        <h1>Shop</h1>
        <div class="shop-item" id="shopItem1">
            <button id="buyButton1">30</button>
            <span id="shopItem1Desc">+2 per click</span>
        </div>
        <div class="shop-item" id="shopItem2">
            <button id="buyButton2">150</button>
            <span id="shopItem2Desc">+4 per click</span>
        </div>
        <div class="shop-item" id="shopItem3">
            <button id="buyButton3">9000</button>
            <span id="shopItem3Desc">+10 per click</span>
        </div>
    </div>

    <div class="messages" id="messages">
        <h1>Messages</h1>
        <div id="messagesContainer"></div>
    </div>

    <div class="debug-window" id="debugWindow">
        <h3>Debug</h3>
        <div class="debug-field">
            <label for="debugCount">Update count:</label>
            <input type="number" id="debugCount" placeholder="Enter count">
        </div>
        <div class="debug-field">
            <label for="debugClickPower">Update clicks per click:</label>
            <input type="number" id="debugClickPower" placeholder="Enter click power">
        </div>
        <button class="debug-save" id="debugSave">Save</button>
    </div>

    <div class="fireworks" id="fireworks"></div>
    <div class="win-screen" id="winScreen">
        <div class="win-text">Congratulations, you win!</div>
    </div>

    <script>
        let clickCount = 0;
        let clickPower = 1;
        let hasClicked = false;
        let manualClickCount = 0;
        let shopItemCost = 30;
        let shopItemVisible = false;
        let shopItem2Cost = 150;
        let shopItem2Visible = false;
        let shopItem3Cost = 9000;
        let shopItem3Visible = false;
        let shopItem1Quantity = 0;
        let shopItem2Quantity = 0;
        let shopItem3Quantity = 0;
        let messagesVisible = false;
        let messageCount = 0;
        let gameWon = false;
        
        // Message system configuration
        const MESSAGES = [
            { threshold: 1500, text: "You're doing great...", shown: false },
            { threshold: 3000, text: "Wow, you're pretty amazing at clicking.", shown: false },
            { threshold: 5200, text: "How high do you plan on going?", shown: false },
            { threshold: 9800, text: "Here, let me give you another shop item.", shown: false },
            { threshold: 20200, text: "You're getting to a pretty high number up there.", shown: false },
            { threshold: 31600, text: "Do you think this game is going anywhere?", shown: false },
            { threshold: 49600, text: "Building up to some grand climax?", shown: false },
            { threshold: 61600, text: "Do you want to guess how many times you've clicked the button?", shown: false },
            { threshold: 70000, text: "You've clicked the button", shown: false, dynamic: true },
            { threshold: 85000, text: "That's a lot of button clicks.", shown: false },
            { threshold: 100000, text: "Surprise! This game is actually unfinished.", shown: false },
            { threshold: 120000, text: "Seriously, nothing more is going to happen.", shown: false },
            { threshold: 150000, text: "Check the code if you don't believe me.", shown: false },
            { threshold: 180000, text: "Okay, this is actually the last message. I'll write more soon.", shown: false }
        ];
        
        // Debug flag - set to true to enable debug window
        const DEBUG_MODE = true;

        const counter = document.getElementById('counter');
        const clickButton = document.getElementById('clickButton');
        const shop = document.getElementById('shop');
        const shopItem = document.getElementById('shopItem1');
        const buyButton = document.getElementById('buyButton1');
        const shopItem2 = document.getElementById('shopItem2');
        const buyButton2 = document.getElementById('buyButton2');
        const shopItem1Desc = document.getElementById('shopItem1Desc');
        const shopItem2Desc = document.getElementById('shopItem2Desc');
        const shopItem3 = document.getElementById('shopItem3');
        const buyButton3 = document.getElementById('buyButton3');
        const shopItem3Desc = document.getElementById('shopItem3Desc');
        const messages = document.getElementById('messages');
        const messagesContainer = document.getElementById('messagesContainer');
        const debugWindow = document.getElementById('debugWindow');
        const debugCount = document.getElementById('debugCount');
        const debugClickPower = document.getElementById('debugClickPower');
        const debugSave = document.getElementById('debugSave');
        const fireworks = document.getElementById('fireworks');
        const winScreen = document.getElementById('winScreen');

        // Initialize debug window based on flag
        if (DEBUG_MODE) {
            debugWindow.style.display = 'block';
        }

        // Debug save functionality
        debugSave.addEventListener('click', function() {
            const newCount = parseInt(debugCount.value);
            const newClickPower = parseInt(debugClickPower.value);
            
            if (!isNaN(newCount)) {
                clickCount = newCount;
                counter.textContent = clickCount.toLocaleString();
                debugCount.value = '';
            }
            
            if (!isNaN(newClickPower)) {
                clickPower = newClickPower;
                debugClickPower.value = '';
            }
            
            // Update shop item visibility and affordability
            if (clickCount >= 30 && !shop.style.display) {
                shop.style.display = 'block';
            }
            
            if (clickCount >= shopItemCost && !shopItemVisible) {
                shopItemVisible = true;
                shopItem.style.display = 'flex';
            }
            
            if (clickCount >= shopItem2Cost && !shopItem2Visible) {
                shopItem2Visible = true;
                shopItem2.style.display = 'flex';
            }
            
            if (clickCount >= 9800 && !shopItem3Visible) {
                shopItem3Visible = true;
                shopItem3.style.display = 'flex';
            }
            
            // Check for new messages to show
            checkMessages();

            // Check for win condition
            if (clickCount >= 200000 && !gameWon) {
                gameWon = true;
                triggerWinScreen();
            }
            
            updateShopItemAffordability();
        });

        clickButton.addEventListener('click', function() {
            // Track manual clicks
            manualClickCount++;
            
            // First click - show counter
            if (!hasClicked) {
                hasClicked = true;
                counter.style.display = 'block';
            }

            // Increase click count
            clickCount += clickPower;
            counter.textContent = clickCount.toLocaleString();

            // Update button text at 15 clicks
            if (clickCount >= 15) {
                clickButton.textContent = 'Keep Clicking';
            }

            // Show shop at 30 clicks
            if (clickCount >= 30 && !shop.style.display) {
                shop.style.display = 'block';
            }

            // Show shop item when it can be afforded for the first time
            if (clickCount >= shopItemCost && !shopItemVisible) {
                shopItemVisible = true;
                shopItem.style.display = 'flex';
            }

            // Show shop item 2 when it can be afforded for the first time
            if (clickCount >= shopItem2Cost && !shopItem2Visible) {
                shopItem2Visible = true;
                shopItem2.style.display = 'flex';
            }
            
            if (clickCount >= 9800 && !shopItem3Visible) {
                shopItem3Visible = true;
                shopItem3.style.display = 'flex';
            }

            // Check for new messages to show
            checkMessages();

            // Check for win condition
            if (clickCount >= 200000 && !gameWon) {
                gameWon = true;
                triggerWinScreen();
            }

            // Update shop item affordability
            updateShopItemAffordability();
        });

        buyButton.addEventListener('click', function() {
            if (clickCount >= shopItemCost && shopItem1Quantity < 10) {
                // Deduct cost from click count
                clickCount -= shopItemCost;
                counter.textContent = clickCount.toLocaleString();

                // Increase click power
                clickPower += 2;

                // Increase quantity
                shopItem1Quantity++;
                if (shopItem1Quantity >= 10) {
                    shopItem1Desc.textContent = `+2 per click (qty: 10 MAX)`;
                } else {
                    shopItem1Desc.textContent = `+2 per click (qty: ${shopItem1Quantity})`;
                }

                // Increase cost by 1.1x and round to nearest integer
                shopItemCost = Math.round(shopItemCost * 1.1);
                buyButton.textContent = shopItemCost;

                // Update affordability
                updateShopItemAffordability();
            }
        });

        buyButton2.addEventListener('click', function() {
            if (clickCount >= shopItem2Cost && shopItem2Quantity < 10) {
                // Deduct cost from click count
                clickCount -= shopItem2Cost;
                counter.textContent = clickCount.toLocaleString();

                // Increase click power
                clickPower += 4;

                // Increase quantity
                shopItem2Quantity++;
                if (shopItem2Quantity >= 10) {
                    shopItem2Desc.textContent = `+4 per click (qty: 10 MAX)`;
                } else {
                    shopItem2Desc.textContent = `+4 per click (qty: ${shopItem2Quantity})`;
                }

                // Increase cost by 1.1x and round to nearest integer
                shopItem2Cost = Math.round(shopItem2Cost * 1.1);
                buyButton2.textContent = shopItem2Cost;

                // Update affordability
                updateShopItemAffordability();
            }
        });

        buyButton3.addEventListener('click', function() {
            if (clickCount >= shopItem3Cost && shopItem3Quantity < 10) {
                // Deduct cost from click count
                clickCount -= shopItem3Cost;
                counter.textContent = clickCount.toLocaleString();

                // Increase click power
                clickPower += 10;

                // Increase quantity
                shopItem3Quantity++;
                if (shopItem3Quantity >= 10) {
                    shopItem3Desc.textContent = `+10 per click (qty: 10 MAX)`;
                } else {
                    shopItem3Desc.textContent = `+10 per click (qty: ${shopItem3Quantity})`;
                }

                // Increase cost by 1.1x and round to nearest integer
                shopItem3Cost = Math.round(shopItem3Cost * 1.1);
                buyButton3.textContent = shopItem3Cost;

                // Update affordability
                updateShopItemAffordability();
            }
        });

        function updateShopItemAffordability() {
            if (shopItemVisible) {
                if (clickCount >= shopItemCost && shopItem1Quantity < 10) {
                    shopItem.className = 'shop-item affordable';
                } else {
                    shopItem.className = 'shop-item unaffordable';
                }
            }
            
            if (shopItem2Visible) {
                if (clickCount >= shopItem2Cost && shopItem2Quantity < 10) {
                    shopItem2.className = 'shop-item affordable';
                } else {
                    shopItem2.className = 'shop-item unaffordable';
                }
            }
            
            if (shopItem3Visible) {
                if (clickCount >= shopItem3Cost && shopItem3Quantity < 10) {
                    shopItem3.className = 'shop-item affordable';
                } else {
                    shopItem3.className = 'shop-item unaffordable';
                }
            }
        }

        function checkMessages() {
            // Show messages window if any message threshold is reached
            const hasReachedAnyThreshold = MESSAGES.some(msg => clickCount >= msg.threshold);
            if (hasReachedAnyThreshold && !messagesVisible) {
                messagesVisible = true;
                messages.style.display = 'block';
            }
            
            // Check each message and show if threshold reached and not shown yet
            MESSAGES.forEach(message => {
                if (clickCount >= message.threshold && !message.shown) {
                    message.shown = true;
                    let messageText = message.text;
                    
                    // Handle dynamic messages that need real-time values
                    if (message.dynamic && message.threshold === 70000) {
                        messageText = `You've clicked the button ${manualClickCount.toLocaleString()} times`;
                    }
                    
                    typeMessage(messageText);
                }
            });
        }

        function typeMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            // Insert new message at the top (after the header)
            messagesContainer.insertBefore(messageDiv, messagesContainer.firstChild);
            messageCount++;
            
            // Remove oldest message if we have more than 10
            if (messageCount > 10) {
                const lastMessage = messagesContainer.lastChild;
                if (lastMessage && lastMessage.className === 'message') {
                    messagesContainer.removeChild(lastMessage);
                    messageCount--;
                }
            }
            
            // Force a layout update and then scroll to top to show new message
            setTimeout(() => {
                messagesContainer.scrollTop = 0;
            }, 0);
            
            let index = 0;
            const fullText = `> ${text}`;
            
            function typeChar() {
                if (index < fullText.length) {
                    messageDiv.textContent += fullText.charAt(index);
                    index++;
                    setTimeout(typeChar, 50); // 50ms delay between characters
                }
            }
            
            typeChar();
        }

        function triggerWinScreen() {
            // Hide all game elements
            document.body.style.overflow = 'hidden';
            
            // Start fireworks animation
            startFireworks();
            
            // Show win screen after a short delay
            setTimeout(() => {
                winScreen.style.display = 'flex';
            }, 500);
        }

        function startFireworks() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#a8e6cf', '#ffd3a5'];
            
            function createFirework() {
                const firework = document.createElement('div');
                firework.className = 'firework';
                
                // Random position
                firework.style.left = Math.random() * 100 + '%';
                firework.style.top = Math.random() * 100 + '%';
                
                // Random color
                firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                fireworks.appendChild(firework);
                
                // Remove after animation
                setTimeout(() => {
                    if (firework.parentNode) {
                        firework.parentNode.removeChild(firework);
                    }
                }, 1000);
            }
            
            // Create fireworks continuously for 10 seconds
            const fireworkInterval = setInterval(createFirework, 100);
            
            setTimeout(() => {
                clearInterval(fireworkInterval);
            }, 10000);
        }
    </script>
</body>
</html>