<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>dann.fun</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            height: 100vh;
        }
        #info {
            position: absolute;
            top: 0;
            width: 100%;
            padding: 5px;
            font-family: Monospace;
            font-size: 13px;
            text-align: center;
            color: #8080f0;
        }
        .bouncer {
            position: absolute;
            width: 300px;
            height: 300px;
            object-fit: contain;
            cursor: grab;
        }
        
        /* Base info button styles */
        .info-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 24px;
            height: 24px;
            background: rgba(128, 128, 128, 0.3);
            border: 1px solid rgba(128, 128, 128, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            color: rgba(128, 128, 128, 0.8);
            transition: all 0.2s ease;
            z-index: 1000;
        }
        
        .info-button::before {
            content: "?";
            font-weight: bold;
        }
        
        .info-tooltip {
            position: absolute;
            left: 35px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            pointer-events: none;
        }
        
        .info-tooltip::after {
            content: "";
            position: absolute;
            left: -5px;
            top: 50%;
            transform: translateY(-50%);
            border: 5px solid transparent;
            border-right-color: rgba(0, 0, 0, 0.8);
        }
        
        .info-tooltip.show {
            opacity: 1;
            visibility: visible;
        }

        /* Desktop hover effect */
        @media (min-width: 768px) {
            .info-button:hover {
                background: rgba(128, 128, 128, 0.5);
                border-color: rgba(128, 128, 128, 0.7);
                color: rgba(128, 128, 128, 1);
            }
            
            .info-button:hover .info-tooltip {
                opacity: 1;
                visibility: visible;
            }
        }

        /* Mobile-specific sizing */
        @media (max-width: 767px) {
            .info-button {
                width: 48px;
                height: 48px;
                font-size: 24px;
                bottom: 30px;
                left: 30px;
                background: rgba(255, 0, 0, 0.3);
            }
            
            .info-tooltip {
                font-size: 18px;
                padding: 16px 20px;
                left: 55px;
            }
        }
    </style>
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">
</head>
<body>
<div class="info-button">
    <div class="info-tooltip">Try clicking and dragging a bouncing face</div>
</div>
<div id="info"><a href="https://dannb.org">dannb.org</a></div>
<script>
    function createBouncers(count) {
        for (let i = 0; i < count; i++) {
            const bouncer = document.createElement('img');
            bouncer.src = 'dann.png';
            bouncer.classList.add('bouncer');
            document.body.appendChild(bouncer);

            let x = Math.random() * (window.innerWidth - 300);
            let y = Math.random() * (window.innerHeight / 2);
            let dx = (Math.random() * 10) - 5;
            let dy = 0;
            const gravity = 0.5;
            let isDragging = false;

            bouncer.style.transform = `translate(${x}px, ${y}px)`;

            // Prevent default drag behavior
            bouncer.addEventListener('dragstart', (e) => e.preventDefault());

            function animate() {
                if (!isDragging) {
                    dy += gravity;
                    x += dx;
                    y += dy;

                    // Bounce off the walls
                    if (x + dx > window.innerWidth - 300 || x + dx < 0) {
                        dx = -dx;
                    }
                    // Bounce off the floor
                    if (y + dy > window.innerHeight - 300) {
                        y = window.innerHeight - 300;
                        dy = -(Math.sqrt(2 * gravity * (window.innerHeight / 2)));
                    }
                    bouncer.style.transform = `translate(${x}px, ${y}px)`;
                }
                requestAnimationFrame(animate);
            }

            // Drag functionality
            bouncer.addEventListener('mousedown', (event) => {
                isDragging = true;
                dx = 0;
                dy = 0;
                const offsetX = event.clientX - x;
                const offsetY = event.clientY - y;

                function onMouseMove(e) {
                    x = e.clientX - offsetX;
                    y = e.clientY - offsetY;
                    bouncer.style.transform = `translate(${x}px, ${y}px)`;
                }

                function onMouseUp() {
                    isDragging = false;
                    dx = (Math.random() * 10) - 5; // Apply slight angle
                    window.removeEventListener('mousemove', onMouseMove);
                    window.removeEventListener('mouseup', onMouseUp);
                }

                window.addEventListener('mousemove', onMouseMove);
                window.addEventListener('mouseup', onMouseUp);
            });

            // Touch functionality for mobile devices
            bouncer.addEventListener('touchstart', (event) => {
                event.preventDefault(); // Prevent default touch behavior
                isDragging = true;
                dx = 0;
                dy = 0;
                const touch = event.touches[0];
                const offsetX = touch.clientX - x;
                const offsetY = touch.clientY - y;

                function onTouchMove(e) {
                    e.preventDefault();
                    const touch = e.touches[0];
                    x = touch.clientX - offsetX;
                    y = touch.clientY - offsetY;
                    bouncer.style.transform = `translate(${x}px, ${y}px)`;
                }

                function onTouchEnd() {
                    isDragging = false;
                    dx = (Math.random() * 10) - 5; // Apply slight angle
                    window.removeEventListener('touchmove', onTouchMove);
                    window.removeEventListener('touchend', onTouchEnd);
                }

                window.addEventListener('touchmove', onTouchMove, { passive: false });
                window.addEventListener('touchend', onTouchEnd);
            });

            animate();
        }
    }

    createBouncers(10);

    // Tooltip toggle functionality
    const infoButton = document.querySelector('.info-button');
    const infoTooltip = document.querySelector('.info-tooltip');
    let isTooltipVisible = false;

    infoButton.addEventListener('click', () => {
        if (isTooltipVisible) {
            infoTooltip.classList.remove('show');
            isTooltipVisible = false;
        } else {
            infoTooltip.classList.add('show');
            isTooltipVisible = true;
        }
    });

    // Add touch support for mobile
    infoButton.addEventListener('touchend', (event) => {
        event.preventDefault();
        if (isTooltipVisible) {
            infoTooltip.classList.remove('show');
            isTooltipVisible = false;
        } else {
            infoTooltip.classList.add('show');
            isTooltipVisible = true;
        }
    });

    // Mobile detection and style application
    function isMobile() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
               window.innerWidth <= 480;
    }

    if (isMobile()) {
        infoButton.style.width = '48px';
        infoButton.style.height = '48px';
        infoButton.style.fontSize = '24px';
        infoButton.style.bottom = '30px';
        infoButton.style.left = '30px';
        infoButton.style.background = 'rgba(128, 128, 128, 0.3)';
        
        infoTooltip.style.fontSize = '18px';
        infoTooltip.style.padding = '16px 20px';
        infoTooltip.style.left = '55px';
    }
</script>
</body>
</html>
